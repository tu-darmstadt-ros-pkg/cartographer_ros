<launch>
  <param name="/use_sim_time" value="true" />

  <include file="$(find cartographer_ros)/launch/smoke_2d.launch" />

  <node name="rviz" pkg="rviz" type="rviz" required="true"
      args="-d $(find cartographer_ros)/configuration_files/evaluation_2d.rviz" />
  <node name="playbag" pkg="rosbag" type="play"
      args="--clock $(arg bag_filename) -d 1 -r 1.0 -s 0" />
      
  <!-- Collect trajectory for evaluation when finished -->
  <node name="pickle_trajectory" pkg="radar_filter" type="collect_trajectory.py"
      args="$(arg bag_filename)" />
      <!-- launch-prefix="bash -c 'sleep `rosbag info -y -k $(arg bag_filename)`'" -->
  <!-- Publish Ground truth trajectory -->
  <!-- <node name="gt_trajectory" pkg="radar_filter" type="pub_marker_array.py" -->
      <!-- args="$(arg bag_filename)" /> -->

  <!-- Display GT Trajectory from "gt_{bag_filenames}.pbstream_poses" file and create a "{bag_filenames}.pbstream_poses" file: -->
  <node name="gt_trajectory" pkg="cartographer_ros" type="save_and_pub_gt_trajectory"
      args="-pose_graph_filename $(arg bag_filename)" />
          
</launch>